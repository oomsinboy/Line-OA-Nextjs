(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{6993:function(e,t,n){Promise.resolve().then(n.bind(n,66569))},55055:function(e,t,n){!function(e){e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(19212))},66569:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(57437),a=n(2265),i=n(16463),r=n(38472),l=n(66648),c=n(19212),o=n.n(c);n(55055);let d={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},u={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},h="mousemove",m="mouseup";function p(e,t){if(0===t)return e;let n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}o().locale("th");var g=e=>{let{items:t,selectedDate:n,onDateSelect:i}=e,[r,c]=(0,a.useState)(o()()),[g,x]=(0,a.useState)(""),f=function(e){var t,n,s;let i;let{trackMouse:r}=e,l=a.useRef(Object.assign({},u)),c=a.useRef(Object.assign({},d)),o=a.useRef(Object.assign({},c.current));for(i in o.current=Object.assign({},c.current),c.current=Object.assign(Object.assign({},d),e),d)void 0===c.current[i]&&(c.current[i]=d[i]);let[g,x]=a.useMemo(()=>(function(e,t){let n=t=>{let n="touches"in t;n&&t.touches.length>1||e((e,a)=>{a.trackMouse&&!n&&(document.addEventListener(h,s),document.addEventListener(m,r));let{clientX:i,clientY:l}=n?t.touches[0]:t,c=p([i,l],a.rotationAngle);return a.onTouchStartOrOnMouseDown&&a.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),u),{initial:c.slice(),xy:c,start:t.timeStamp||0})})},s=t=>{e((e,n)=>{let s="touches"in t;if(s&&t.touches.length>1)return e;if(t.timeStamp-e.start>n.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:a,clientY:i}=s?t.touches[0]:t,[r,l]=p([a,i],n.rotationAngle),c=r-e.xy[0],o=l-e.xy[1],u=Math.abs(c),h=Math.abs(o),m=(t.timeStamp||0)-e.start,g=u>h?c>0?"Right":"Left":o>0?"Down":"Up",x="number"==typeof n.delta?n.delta:n.delta[g.toLowerCase()]||d.delta;if(u<x&&h<x&&!e.swiping)return e;let f={absX:u,absY:h,deltaX:c,deltaY:o,dir:g,event:t,first:e.first,initial:e.initial,velocity:Math.sqrt(u*u+h*h)/(m||1),vxvy:[c/(m||1),o/(m||1)]};f.first&&n.onSwipeStart&&n.onSwipeStart(f),n.onSwiping&&n.onSwiping(f);let b=!1;return(n.onSwiping||n.onSwiped||n[`onSwiped${g}`])&&(b=!0),b&&n.preventScrollOnSwipe&&n.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:f,swiping:!0})})},a=t=>{e((e,n)=>{let s;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<n.swipeDuration){s=Object.assign(Object.assign({},e.eventData),{event:t}),n.onSwiped&&n.onSwiped(s);let a=n[`onSwiped${s.dir}`];a&&a(s)}}else n.onTap&&n.onTap({event:t});return n.onTouchEndOrOnMouseUp&&n.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),u),{eventData:s})})},i=()=>{document.removeEventListener(h,s),document.removeEventListener(m,r)},r=e=>{i(),a(e)},l=(e,t)=>{let i=()=>{};if(e&&e.addEventListener){let r=Object.assign(Object.assign({},d.touchEventOptions),t.touchEventOptions),l=[["touchstart",n,r],["touchmove",s,Object.assign(Object.assign({},r),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",a,r]];l.forEach(([t,n,s])=>e.addEventListener(t,n,s)),i=()=>l.forEach(([t,n])=>e.removeEventListener(t,n))}return i},c={ref:t=>{null!==t&&e((e,n)=>{if(e.el===t)return e;let s={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),s.cleanUpTouch=void 0),n.trackTouch&&t&&(s.cleanUpTouch=l(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),s)})}};return t.trackMouse&&(c.onMouseDown=n),[c,l]})(e=>l.current=e(l.current,c.current),{trackMouse:r}),[r]);return l.current=(t=l.current,n=c.current,s=o.current,n.trackTouch&&t.el?t.cleanUpTouch?n.preventScrollOnSwipe!==s.preventScrollOnSwipe||n.touchEventOptions.passive!==s.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,n)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,n)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),g}({onSwipedLeft:()=>b("next"),onSwipedRight:()=>b("prev"),trackMouse:!0}),b=e=>{x(e),setTimeout(()=>{c(t=>"next"===e?t.clone().add(1,"months"):t.clone().subtract(1,"months")),x("")},300)},v=(()=>{let e=r.daysInMonth(),t=r.startOf("month").day(),n=r.clone().subtract(1,"months").endOf("month").date(),s=[];for(let e=t-1;e>=0;e--)s.push({day:n-e,isCurrentMonth:!1});for(let t=1;t<=e;t++)s.push({day:t,isCurrentMonth:!0});return s})(),j=e=>{if(!t)return"";let n=r.clone().date(e).format("YYYY-MM-DD"),s=t.daily_details.findIndex(e=>e.date_before_appointment===n);if(-1===s)return"";let a=s===t.daily_details.length-1,i=s>0&&s<t.daily_details.length-1;return o()().isAfter(o()(n),"day")?"bg-[#C3C3C3] text-gray-500":0===s||a?"bg-[#AF88FF] text-white":i?"bg-[#F5C725] text-white":""};return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mx-5 text-xl font-bold",children:"รายการที่ต้องปฏิบัติ"}),(0,s.jsx)("div",{...f,children:(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white p-4 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("button",{onClick:()=>b("prev"),children:(0,s.jsx)(l.default,{src:"/image/icon_left.png",alt:"logo",width:15,height:15})}),(0,s.jsx)("span",{className:"text-xl font-bold text-[#AF88FF] ",children:r.format("MMMM YYYY")}),(0,s.jsx)("button",{onClick:()=>b("next"),children:(0,s.jsx)(l.default,{src:"/image/icon_right.png",alt:"logo",width:15,height:15})})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["อา","จ","อ","พ","พฤ","ศ","ส"].map((e,t)=>(0,s.jsx)("div",{className:"text-center font-medium",children:e},t))}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"grid grid-cols-7 gap-2 transition-transform duration-300 ".concat("next"===g?"transform -translate-x-full":"prev"===g?"transform translate-x-full":""),children:v.map((e,t)=>(0,s.jsx)("div",{className:"relative p-2 rounded-full h-12 flex flex-col items-center justify-center ".concat(e.isCurrentMonth?j(e.day):"text-gray-400"),onClick:()=>{e.isCurrentMonth&&i(r.clone().date(e.day).format("YYYY-MM-DD"))},children:(0,s.jsx)("div",{children:e.day})},t))})})]})})]})};o().locale("th");var x=e=>{let{items:t,selectedDate:n}=e,[i,r]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(n&&t){let e=t.daily_details.findIndex(e=>e.date_before_appointment===n);r(-1!==e?e:null)}},[n,t]);let c=e=>{r(i===e?null:e)},d=e=>o()(e).isBefore(o()(),"day"),u=["วันลงทะเบียนนัดส่องกล้อง","ข้อควรปฏิบัติ","ข้อควรปฏิบัติ","วันที่นัดส่องกล้อง"];return(0,s.jsx)("div",{className:"".concat(0===i||1===i?"min-h-[65vh]":"min-h-[50vh]"," pt-5 pb-1 rounded-t-3xl bg-[#F9F2FB]"),children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3 mx-5",children:"รายการแจ้งเตือนทั้งหมด"}),t?null==t?void 0:t.daily_details.map((e,n)=>{let a=d(e.date_before_appointment),r=0===n||n===t.daily_details.length-1?a?"border-gray-400":"border-[#AF88FF]":a?"border-gray-400":"border-[#F5C725]",h=0===n||n===t.daily_details.length-1?a?"bg-[#C3C3C3]":"bg-[#AF88FF]":a?"bg-[#C3C3C3]":"bg-[#F5C725]",m=0===n||n===t.daily_details.length-1?a?"text-[#C3C3C3]":"text-[#AF88FF]":a?"text-[#C3C3C3]":"text-[#F5C725]";return(0,s.jsxs)("div",{className:"mb-2 px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer bg-white ".concat(i===n?"".concat(r," border-t border-l border-r rounded-t-lg px-3 pt-3"):"border rounded-lg p-3"," ").concat(i===n&&a?"border-gray-400":""),onClick:()=>c(n),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full mr-2 ".concat(h)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold ".concat(m),children:u[n%u.length]}),(0,s.jsx)("p",{className:" ".concat(a?"text-[#C3C3C3]":""),children:o()(e.date_before_appointment).format("D MMMM YYYY")})]})]}),(0,s.jsx)("div",{children:i===n?(0,s.jsx)(l.default,{className:"gap-2",src:"/image/icon_up.png",alt:"icon up",width:30,height:30}):(0,s.jsx)(l.default,{className:"gap-2",src:"/image/icon_down.png",alt:"icon down",width:30,height:30})})]}),(0,s.jsx)("div",{className:"transition-max-height duration-500 ease-in-out ".concat(i===n?"opacity-100":"max-h-0"," overflow-hidden"),children:i===n&&(0,s.jsxs)("div",{className:"p-3 bg-white border-l border-r border-b rounded-b-lg ".concat(r),children:[(0,s.jsx)("div",{className:"border mb-3"}),(0,s.jsx)("div",{className:"break-words ",dangerouslySetInnerHTML:{__html:e.noti_detail}})]})})]},n)}):(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"})]})]})})},f=e=>{let{items:t}=e,[n,i]=(0,a.useState)(null),r=(0,a.useRef)(null);return(0,s.jsxs)("div",{children:[(0,s.jsx)(g,{items:t,selectedDate:n,onDateSelect:e=>{i(e),setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)}}),(0,s.jsx)("div",{ref:r,children:(0,s.jsx)(x,{items:t,selectedDate:n})})]})},b=()=>{let e=(0,i.useSearchParams)(),[t,n]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=e.get("userId");t?(async()=>{try{let e=await r.Z.get("".concat("https://colonoscopytuh.com/backend/api/","user/appointments?userId=").concat(t));n(e.data)}catch(e){d("Error fetching data")}finally{c(!1)}})():c(!1)},[e]),(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"z-10 fixed top-0 left-0 right-0 py-2 bg-[#AF88FF] flex justify-center items-center h-12",children:(0,s.jsx)("div",{className:"text-white text-center",children:(0,s.jsx)("span",{children:"กำหนดการของฉัน (Schedule)"})})}),(0,s.jsx)("div",{className:"pt-16",children:(0,s.jsx)(f,{items:t})})]})}}},function(e){e.O(0,[990,236,648,971,23,744],function(){return e(e.s=6993)}),_N_E=e.O()}]);