(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{71113:function(e,s,t){Promise.resolve().then(t.bind(t,30672))},30672:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var l=t(57437),i=t(86504),a=t(2265),n=t(38472),c=t(66648),r=t(87138),d=t(19212),x=t.n(d);t(55055);var o=t(6920),m=t(45079),h=t(16463),u=e=>{let{items:s}=e,t=(0,h.useRouter)(),[i,n]=(0,a.useState)([]),[d,u]=(0,a.useState)(""),[p,j]=(0,a.useState)(1),[f]=(0,a.useState)(10),[N,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{Array.isArray(s.all_visit)?n(s.all_visit):console.error("คาดว่า items.all_visit จะเป็นอาร์เรย์ แต่ได้:",s.all_visit)},[s]);let v=i.filter(e=>e.patient_name.toLowerCase().includes(d.toLowerCase())).reverse(),g=a.useMemo(()=>null!==N?[...v].sort((e,s)=>e[N.key]<s[N.key]?"asc"===N.direction?-1:1:e[N.key]>s[N.key]?"asc"===N.direction?1:-1:0):v,[v,N]),b=p*f,y=g.slice(b-f,b),F=e=>{e<1||e>_||j(e)},_=Math.ceil(v.length/f),k=e=>{let s="asc";N&&N.key===e&&"asc"===N.direction&&(s="desc"),w({key:e,direction:s})},C=e=>N&&N.key===e?"asc"===N.direction?(0,l.jsx)(o.G,{icon:m.foy}):(0,l.jsx)(o.G,{icon:m.u9C}):(0,l.jsx)(o.G,{icon:m.CmM}),O=async e=>{t.push("/home/patient/view-patient?id=".concat(e))};return(0,l.jsx)("div",{className:"px-8",children:(0,l.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,l.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xl 2xl:text-2xl text-[#5955B3] font-semibold",children:"รายการผู้ป่วย"}),(0,l.jsxs)("div",{className:"text-[#705396]",children:["ทั้งหมด ",i.length," รายการ"]})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-72",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:"Search",value:d,onChange:e=>{u(e.target.value),j(1)}})})}),(0,l.jsxs)(r.default,{href:"".concat("/","home/patient/notifications-today"),className:"relative text-white w-[160px] font-light bg-[#AF88FF] btn btn-active mx-4",children:[(0,l.jsx)("span",{children:"Notifications Today"}),s.daily_noti>0&&(0,l.jsx)("div",{className:"absolute top-0 right-0 translate-x-[40%] -translate-y-[40%] text-white rounded-full bg-red-500 w-6 h-6 flex items-center justify-center",children:s.daily_noti})]}),(0,l.jsxs)(r.default,{href:"".concat("/","home/patient/new-patient"),className:"relative text-white w-40 font-light bg-[#AF88FF] btn  ",children:[(0,l.jsx)(c.default,{className:"absolute left-4",src:"/image/icon_plus.png",alt:"logo",width:20,height:20}),"Add New"]})]})]}),(0,l.jsx)("div",{className:"2xl:pt-3 flex-grow",children:(0,l.jsx)("div",{className:"overflow-x-auto ",children:(0,l.jsxs)("table",{className:"table ",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-center bg-[#C0B4D9] text-base text-[#461F78]",children:[(0,l.jsxs)("th",{className:"w-[398px] cursor-pointer",onClick:()=>k("timestamp"),children:["วันที่ลงทะเบียน ",C("timestamp")]}),(0,l.jsxs)("th",{className:"w-[427px] cursor-pointer",onClick:()=>k("appointment_date"),children:["วันนัดหมายตามกำหนด ",C("appointment_date")]}),(0,l.jsxs)("th",{className:"w-[450px] cursor-pointer",onClick:()=>k("patient_name"),children:["ชื่อ-นามสกุล ",C("patient_name")]}),(0,l.jsxs)("th",{className:"w-[108px] cursor-pointer",onClick:()=>k("state"),children:["สถานะ ",C("state")]}),(0,l.jsx)("th",{children:"Action"})]})}),(0,l.jsx)("tbody",{className:"text-center text-base text-[#705396]",children:y.map((e,s)=>(0,l.jsxs)("tr",{className:"border-none ".concat((s+1)%2==0?"bg-[#F4F4FE]":""),children:[(0,l.jsx)("td",{className:"w-[398px]",children:x().utc(e.timestamp).add(543,"years").format("DD-MM-YYYY HH:mm:ss")}),(0,l.jsxs)("td",{className:"w-[427px]",children:[x()(e.appointment_date).add(543,"years").format("DD-MM-YYYY")," | ",e.appointment_time]}),(0,l.jsx)("td",{className:"w-[450px] break-words",children:e.patient_name}),(0,l.jsx)("td",{className:"w-[108px]",children:e.state}),(0,l.jsx)("td",{className:" justify-center flex",children:(0,l.jsx)("div",{className:"cursor-pointer",onClick:()=>O(e.visit_id),children:(0,l.jsx)(c.default,{src:"/image/icon_view.png",alt:"logo",width:30,height:30})})})]},s))})]})})}),(0,l.jsxs)("div",{className:"pagination mt-3 2xl:mt-4 select-none flex justify-end items-center",children:[(0,l.jsx)("button",{className:"px-3 py-1 mx-1 rounded-full bg-white text-[#461F78] cursor-pointer",onClick:()=>F(p-1),disabled:1===p,children:"<"}),(()=>{let e=[];if(_<=4)for(let s=1;s<=_;s++)e.push((0,l.jsx)("li",{className:"list-none cursor-pointer px-3 py-1 mx-1 rounded-full ".concat(p===s?"bg-[#AF88FF] text-white":"bg-white text-[#461F78]"),onClick:()=>F(s),children:s},s));else{e.push((0,l.jsx)("li",{className:"list-none cursor-pointer px-3 py-1 mx-1 rounded-full ".concat(1===p?"bg-[#AF88FF] text-white":"bg-white text-[#461F78]"),onClick:()=>F(1),children:"1"},1)),p>3&&e.push((0,l.jsx)("li",{className:"list-none px-3 py-1 mx-1",children:"..."},"start-ellipsis"));let s=Math.max(2,p-1),t=Math.min(_-1,p+1);for(let i=s;i<=t;i++)e.push((0,l.jsx)("li",{className:"list-none cursor-pointer px-3 py-1 mx-1 rounded-full ".concat(p===i?"bg-[#AF88FF] text-white":"bg-white text-[#461F78]"),onClick:()=>F(i),children:i},i));p<_-2&&e.push((0,l.jsx)("li",{className:"list-none px-3 py-1 mx-1",children:"..."},"end-ellipsis")),e.push((0,l.jsx)("li",{className:"list-none cursor-pointer px-3 py-1 mx-1 rounded-full ".concat(p===_?"bg-[#AF88FF] text-white":"bg-white text-[#461F78]"),onClick:()=>F(_),children:_},_))}return e})(),(0,l.jsx)("button",{className:"px-3 py-1 mx-1 rounded-full bg-white text-[#461F78] cursor-pointer",onClick:()=>F(p+1),disabled:p===_,children:">"})]})]})})})},p=t(46797),j=t(44785),f=function(){let[e,s]=(0,a.useState)(null),[t,c]=(0,a.useState)(!0),r=(0,h.useRouter)();return((0,a.useEffect)(()=>{j.Z.get("__user")||r.push("/")},[r]),(0,a.useEffect)(()=>{(async()=>{try{let e=await n.Z.get("https://colonoscopytuh.com/backend/api/visit/");s(e.data)}catch(e){console.error("Error fetching data:",e)}finally{c(!1)}})()},[]),t)?(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)(i.Z,{}),(0,l.jsx)(p.o,{})]}):(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)(i.Z,{}),e&&(0,l.jsx)(u,{items:e})]})}},86504:function(e,s,t){"use strict";var l=t(57437);t(2265);var i=t(66648),a=t(87138),n=t(64379),c=t.n(n),r=t(16463),d=t(44785);s.Z=()=>{let e=(0,r.useRouter)(),s=(0,r.usePathname)();return(0,l.jsx)("div",{className:"p-8 pt-3 2xl:pt-8 pb-2",children:(0,l.jsxs)("div",{className:" rounded-[15px] bg-white px-2 py-1 flex justify-between",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(i.default,{src:"/image/logo_colonoscopy_small.png",alt:"logo",width:64,height:64,className:"2xl:w-20"}),(0,l.jsx)("div",{className:"flex items-center text-xl text-[#9b88c0] font-medium select-none ",children:(0,l.jsx)("h1",{children:"COLONOSCOPY TUH"})}),(0,l.jsxs)(a.default,{href:"".concat("/","home"),className:"ml-10 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(i.default,{src:"/image/icon_home.png",alt:"logo",width:30,height:30})}),(0,l.jsx)("h1",{className:"mx-2",children:"หน้าหลัก"})]}),(0,l.jsxs)(a.default,{href:"#",onClick:t=>{t.preventDefault(),"/home/"===s?e.push("/home/"):e.back()},className:"mx-5 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(i.default,{src:"/image/icon_back.png",alt:"logo",width:30,height:30})}),(0,l.jsx)("h1",{className:"mx-2",children:"ย้อนกลับ"})]})]}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{onClick:e=>{e.preventDefault(),c().fire({title:"ยืนยันการออกจากระบบ",text:"คุณกำลังออกจากระบบ ต้องการดำเนินการต่อหรือไม่ ?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}}).then(e=>{e.isConfirmed&&c().fire({title:"ออกจากระบบ!",text:"คุณได้ออกจากระบบแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{d.Z.remove("__user"),window.location.href="".concat("/")})})},className:"cursor-pointer mx-16 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(i.default,{src:"/image/icon_out.png",alt:"logo",width:30,height:30})}),(0,l.jsx)("h1",{className:"mx-2",children:"ออกจากระบบ"})]})})]})})}},46797:function(e,s,t){"use strict";t.d(s,{o:function(){return i}});var l=t(57437);s.Z=()=>(0,l.jsx)("div",{className:"px-8",children:(0,l.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 flex justify-center",children:(0,l.jsxs)("div",{className:"min-h-[81.71dvh] w-[70%] flex flex-col",children:[(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"เพิ่มผู้ป่วยใหม่"})}),(0,l.jsxs)("form",{action:"",className:" mt-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"w-1/2 pr-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!0})})]})}),(0,l.jsx)("div",{className:"w-1/2 pl-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"นามสกุล"}),(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!0})})]})})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"w-1/2 pr-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow text-[#705396]",maxLength:13,pattern:"\\d{13}",readOnly:!0})})]})}),(0,l.jsx)("div",{className:"w-1/2 pl-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"date",className:"grow text-[#705396]",readOnly:!0})})]})})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"w-1/2 pr-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,l.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",readOnly:!0})})]})}),(0,l.jsx)("div",{className:"w-1/2 pl-4",children:(0,l.jsxs)("div",{className:"my-2",children:[(0,l.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",readOnly:!0})})]})})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"})}),(0,l.jsx)("div",{className:"rounded bg-[#E8DBF5] min-h-[49dvh] p-3",children:(0,l.jsx)("span",{className:"text-[#705396]",children:" รายการที่เลือก 0 รายการ"})})]}),(0,l.jsx)("div",{className:"w-1/2 pl-4 flex justify-center items-center",children:(0,l.jsxs)("div",{className:"text-center w-1/2",children:[(0,l.jsx)("div",{className:"text-[#461F78] text-3xl font-semibold my-2",children:"OTP"}),(0,l.jsx)("div",{className:"text-[#705396] my-2",children:"รหัสนี้ใช้สำหรับลงทะเบียนผู้ใช้งาน Line OA"}),(0,l.jsx)("div",{className:"p-10 bg-[#F8F5FB] my-2",children:(0,l.jsx)("span",{className:"text-[#7F57D0] text-4xl tracking-widest"})})]})})]})]})})});let i=()=>(0,l.jsx)("div",{className:"px-8",children:(0,l.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,l.jsx)("div",{className:"min-h-[81.71dvh] flex flex-col"})})})}},function(e){e.O(0,[461,990,676,236,648,495,821,971,23,744],function(){return e(e.s=71113)}),_N_E=e.O()}]);