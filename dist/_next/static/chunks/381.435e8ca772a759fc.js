"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{6463:function(e,t,n){var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},4381:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(7437),i=n(8472),a=n(2265),o=function(e){return"object"==typeof e&&null!==e},c=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,i=void 0===r?4:r,c=e.onChange,u=e.onPaste,s=e.renderInput,l=e.shouldAutoFocus,f=void 0!==l&&l,d=e.inputType,p=void 0===d?"text":d,v=e.renderSeparator,h=e.placeholder,m=e.containerStyle,g=e.inputStyle,x=e.skipDefaultStyles,y=void 0!==x&&x,w=a.useState(0),b=w[0],j=w[1],S=a.useRef([]),N=function(){return n?n.toString().split(""):[]},D="number"===p||"tel"===p;a.useEffect(function(){S.current=S.current.slice(0,i)},[i]),a.useEffect(function(){var e;f&&(null===(e=S.current[0])||void 0===e||e.focus())},[f]);var C=function(){if("string"==typeof h){if(h.length===i)return h;h.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},P=function(e){return(D?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},T=function(e){var t=e.target.value;P(t)&&(I(t),E(b+1))},k=function(e){var t=e.nativeEvent,n=e.target.value;P(n)||(n.length!==i||n.split("").some(function(e){return!P(e)})||(B(n.split("")),E(i-1)),null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),I(""),E(b-1)),e.target.value="")},A=function(){j(b-1)},F=function(e){var t=N();[e.code,e.key].includes("Backspace")?(e.preventDefault(),I(""),E(b-1)):"Delete"===e.code?(e.preventDefault(),I("")):"ArrowLeft"===e.code?(e.preventDefault(),E(b-1)):"ArrowRight"===e.code?(e.preventDefault(),E(b+1)):e.key===t[b]?(e.preventDefault(),E(b+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},E=function(e){var t,n,r=Math.max(Math.min(i-1,e),0);S.current[r]&&(null===(t=S.current[r])||void 0===t||t.focus(),null===(n=S.current[r])||void 0===n||n.select(),j(r))},I=function(e){var t=N();t[b]=e[0],B(t)},B=function(e){c(e.join(""))},O=function(e){e.preventDefault();var t,n=N(),r=b,a=e.clipboardData.getData("text/plain").slice(0,i-b).split("");if(!(D&&a.some(function(e){return isNaN(Number(e))}))){for(var o=0;o<i;++o)o>=b&&a.length>0&&(n[o]=null!==(t=a.shift())&&void 0!==t?t:"",r++);E(r),B(n)}};return a.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},o(m)&&m),className:"string"==typeof m?m:void 0,onPaste:u},Array.from({length:i},function(e,t){return t}).map(function(e){var t,n,r;return a.createElement(a.Fragment,{key:e},s({value:null!==(t=N()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=C())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return S.current[e]=t},onChange:T,onFocus:function(t){j(e),t.target.select()},onBlur:A,onKeyDown:F,onPaste:O,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},o(g)?g:{}),className:"string"==typeof g?g:void 0,type:p,inputMode:D?"numeric":"text",onInput:k},e),e<i-1&&("function"==typeof v?v(e):v))}))},u=n(4379),s=n.n(u),l=n(6463);n(4376);var f=function(){let[e,t]=(0,a.useState)(""),n=(0,l.useSearchParams)().get("userId")||"",o=async()=>{if(6!==e.length){s().fire({title:"ขออภัย",text:"กรุณากรอก OTP ให้ถูกต้อง",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}});return}try{let t=await i.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","otp/verify"),{userId:n,otp:e},{headers:{"Content-Type":"application/json"}});console.log("Data saved successfully:",t.data),200===t.status?s().fire({title:"สำเร็จ",text:"ระบบได้ทำการลงทะเบียน ข้อมูลของท่านเรียบร้อยแล้ว",icon:"success",cancelButtonText:"Close",customClass:{icon:"custom-swal2-warning-text"}}):s().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),s().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}})}};return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)("div",{className:"py-2 bg-[#AF88FF] flex justify-center items-center h-12",children:(0,r.jsx)("div",{className:"text-white text-center",children:(0,r.jsx)("span",{children:"Sign up"})})}),(0,r.jsx)("div",{className:"pt-[25dvh] flex justify-center items-center text-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-2xl",children:"Please Fill in OTP"}),(0,r.jsx)("div",{children:(0,r.jsx)(c,{value:e,onChange:t,numInputs:6,containerStyle:{display:"flex",justifyContent:"center",margin:"20px 0"},inputStyle:{width:"50px",height:"60px",margin:"0 5px",fontSize:"18px",border:"1px solid #7F57D0",textAlign:"center"},renderInput:e=>(0,r.jsx)("input",{...e})})}),(0,r.jsx)("div",{className:"flex justify-center w-full my-10",children:(0,r.jsx)("button",{onClick:o,className:"text-white w-32 h-10 text-xl font-light bg-[#AF88FF] btn btn-active",children:"Submit"})})]})})]})}}}]);