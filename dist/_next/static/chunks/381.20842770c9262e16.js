"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{64381:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(57437),i=n(38472),a=n(2265),c=function(e){return"object"==typeof e&&null!==e},o=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,i=void 0===r?4:r,o=e.onChange,l=e.onPaste,s=e.renderInput,u=e.shouldAutoFocus,f=void 0!==u&&u,d=e.inputType,p=void 0===d?"text":d,v=e.renderSeparator,h=e.placeholder,x=e.containerStyle,m=e.inputStyle,g=e.skipDefaultStyles,y=void 0!==g&&g,w=a.useState(0),j=w[0],b=w[1],N=a.useRef([]),S=function(){return n?n.toString().split(""):[]},C="number"===p||"tel"===p;a.useEffect(function(){N.current=N.current.slice(0,i)},[i]),a.useEffect(function(){var e;f&&(null===(e=N.current[0])||void 0===e||e.focus())},[f]);var D=function(){if("string"==typeof h){if(h.length===i)return h;h.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},T=function(e){return(C?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},k=function(e){var t=e.target.value;T(t)&&(I(t),E(j+1))},A=function(e){var t=e.nativeEvent,n=e.target.value;T(n)||(n.length!==i||n.split("").some(function(e){return!T(e)})||(B(n.split("")),E(i-1)),null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),I(""),E(j-1)),e.target.value="")},F=function(){b(j-1)},P=function(e){var t=S();[e.code,e.key].includes("Backspace")?(e.preventDefault(),I(""),E(j-1)):"Delete"===e.code?(e.preventDefault(),I("")):"ArrowLeft"===e.code?(e.preventDefault(),E(j-1)):"ArrowRight"===e.code?(e.preventDefault(),E(j+1)):e.key===t[j]?(e.preventDefault(),E(j+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},E=function(e){var t,n,r=Math.max(Math.min(i-1,e),0);N.current[r]&&(null===(t=N.current[r])||void 0===t||t.focus(),null===(n=N.current[r])||void 0===n||n.select(),b(r))},I=function(e){var t=S();t[j]=e[0],B(t)},B=function(e){o(e.join(""))},O=function(e){e.preventDefault();var t,n=S(),r=j,a=e.clipboardData.getData("text/plain").slice(0,i-j).split("");if(!(C&&a.some(function(e){return isNaN(Number(e))}))){for(var c=0;c<i;++c)c>=j&&a.length>0&&(n[c]=null!==(t=a.shift())&&void 0!==t?t:"",r++);E(r),B(n)}};return a.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},c(x)&&x),className:"string"==typeof x?x:void 0,onPaste:l},Array.from({length:i},function(e,t){return t}).map(function(e){var t,n,r;return a.createElement(a.Fragment,{key:e},s({value:null!==(t=S()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=D())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return N.current[e]=t},onChange:k,onFocus:function(t){b(e),t.target.select()},onBlur:F,onKeyDown:P,onPaste:O,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},c(m)?m:{}),className:"string"==typeof m?m:void 0,type:p,inputMode:C?"numeric":"text",onInput:A},e),e<i-1&&("function"==typeof v?v(e):v))}))},l=n(64379),s=n.n(l),u=n(16463);n(34376);var f=function(){let[e,t]=(0,a.useState)(""),n=(0,u.useSearchParams)().get("userId")||"",[c,l]=(0,a.useState)(null),f=async()=>{if(6!==e.length){s().fire({title:"ขออภัย",text:"กรุณากรอก OTP ให้ถูกต้อง",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}});return}try{let t=await i.Z.post("".concat("https://colonoscopytuh.com/backend/api/","otp/verify"),{userId:n,otp:e},{headers:{"Content-Type":"application/json"}});if(200===t.status){l(t.data);let e=t.data.message.split(" "),n=e.shift(),r=e.join(" ");s().fire({title:"".concat(n,"<br>").concat(r),text:"ระบบได้ทำการลงทะเบียน ข้อมูลของท่านเรียบร้อยแล้ว",icon:"success",cancelButtonText:"Close",customClass:{icon:"custom-swal2-warning-text"}})}else s().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),s().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}})}};return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)("div",{className:"py-2 bg-[#AF88FF] flex justify-center items-center h-12",children:(0,r.jsx)("div",{className:"text-white text-center",children:(0,r.jsx)("span",{children:"Sign up"})})}),(0,r.jsx)("div",{className:"pt-[25dvh] flex justify-center items-center text-center",children:c?(0,r.jsx)("div",{children:c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl text-[#5d3f9a]",children:"ลงทะเบียนสำเร็จ"}),(0,r.jsx)("div",{className:"text-2xl text-[#5d3f9a]",children:c.message})]})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-2xl",children:"Please Fill in OTP"}),(0,r.jsx)("div",{children:(0,r.jsx)(o,{value:e,onChange:t,numInputs:6,inputType:"tel",containerStyle:{display:"flex",justifyContent:"center",margin:"20px 0"},inputStyle:{width:"50px",height:"60px",margin:"0 5px",fontSize:"18px",border:"1px solid #7F57D0",textAlign:"center"},renderInput:e=>(0,r.jsx)("input",{...e})})}),(0,r.jsx)("div",{className:"flex justify-center w-full my-10",children:(0,r.jsx)("button",{onClick:f,className:"text-white w-32 h-10 text-xl font-light bg-[#AF88FF] btn btn-active",children:"Submit"})})]})})]})}}}]);